Processing 8 images with 8 specifications
[Marketplace Preset] Using default mode (no prompt modifications)
[Parameter Analysis] Analyzing 8 images for AI parameters...
[JobStore] Successfully saved job job_1764642871351 to database
(node:103) [node-fetch#buffer] DeprecationWarning: Please use 'response.arrayBuffer()' instead of 'response.buffer()'
(Use `node --trace-deprecation ...` to show where the warning was created)
Image analysis error: GoogleGenerativeAIFetchError: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent: [400 Bad Request] API key not valid. Please pass a valid API key. [{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"API_KEY_INVALID","domain":"googleapis.com","metadata":{"service":"generativelanguage.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"API key not valid. Please pass a valid API key."}]
    at handleResponseNotOk (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:432:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async makeRequest (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:401:9)
    at async generateContent (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:865:22)
    at async analyzeImageForParameters (file:///home/runner/workspace/server/services/geminiImage.js:189:20)
    at async Promise.all (index 6)
    at async processImagesWithGemini (file:///home/runner/workspace/server/controllers/uploadController.js:878:21) {
  status: 400,
  statusText: 'Bad Request',
  errorDetails: [
    {
      '@type': 'type.googleapis.com/google.rpc.ErrorInfo',
      reason: 'API_KEY_INVALID',
      domain: 'googleapis.com',
      metadata: [Object]
    },
    {
      '@type': 'type.googleapis.com/google.rpc.LocalizedMessage',
      locale: 'en-US',
      message: 'API key not valid. Please pass a valid API key.'
    }
  ]
}
Image analysis error: GoogleGenerativeAIFetchError: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent: [400 Bad Request] API key not valid. Please pass a valid API key. [{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"API_KEY_INVALID","domain":"googleapis.com","metadata":{"service":"generativelanguage.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"API key not valid. Please pass a valid API key."}]
    at handleResponseNotOk (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:432:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async makeRequest (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:401:9)
    at async generateContent (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:865:22)
    at async analyzeImageForParameters (file:///home/runner/workspace/server/services/geminiImage.js:189:20)
    at async Promise.all (index 7)
    at async processImagesWithGemini (file:///home/runner/workspace/server/controllers/uploadController.js:878:21) {
  status: 400,
  statusText: 'Bad Request',
  errorDetails: [
    {
      '@type': 'type.googleapis.com/google.rpc.ErrorInfo',
      reason: 'API_KEY_INVALID',
      domain: 'googleapis.com',
      metadata: [Object]
    },
    {
      '@type': 'type.googleapis.com/google.rpc.LocalizedMessage',
      locale: 'en-US',
      message: 'API key not valid. Please pass a valid API key.'
    }
  ]
}
Image analysis error: GoogleGenerativeAIFetchError: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent: [400 Bad Request] API key not valid. Please pass a valid API key. [{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"API_KEY_INVALID","domain":"googleapis.com","metadata":{"service":"generativelanguage.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"API key not valid. Please pass a valid API key."}]
    at handleResponseNotOk (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:432:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async makeRequest (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:401:9)
    at async generateContent (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:865:22)
    at async analyzeImageForParameters (file:///home/runner/workspace/server/services/geminiImage.js:189:20)
    at async Promise.all (index 5)
    at async processImagesWithGemini (file:///home/runner/workspace/server/controllers/uploadController.js:878:21) {
  status: 400,
  statusText: 'Bad Request',
  errorDetails: [
    {
      '@type': 'type.googleapis.com/google.rpc.ErrorInfo',
      reason: 'API_KEY_INVALID',
      domain: 'googleapis.com',
      metadata: [Object]
    },
    {
      '@type': 'type.googleapis.com/google.rpc.LocalizedMessage',
      locale: 'en-US',
      message: 'API key not valid. Please pass a valid API key.'
    }
  ]
}
Image analysis error: GoogleGenerativeAIFetchError: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent: [400 Bad Request] API key not valid. Please pass a valid API key. [{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"API_KEY_INVALID","domain":"googleapis.com","metadata":{"service":"generativelanguage.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"API key not valid. Please pass a valid API key."}]
    at handleResponseNotOk (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:432:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async makeRequest (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:401:9)
    at async generateContent (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:865:22)
    at async analyzeImageForParameters (file:///home/runner/workspace/server/services/geminiImage.js:189:20)
    at async Promise.all (index 3)
    at async processImagesWithGemini (file:///home/runner/workspace/server/controllers/uploadController.js:878:21) {
  status: 400,
  statusText: 'Bad Request',
  errorDetails: [
    {
      '@type': 'type.googleapis.com/google.rpc.ErrorInfo',
      reason: 'API_KEY_INVALID',
      domain: 'googleapis.com',
      metadata: [Object]
    },
    {
      '@type': 'type.googleapis.com/google.rpc.LocalizedMessage',
      locale: 'en-US',
      message: 'API key not valid. Please pass a valid API key.'
    }
  ]
}
Image analysis error: GoogleGenerativeAIFetchError: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent: [400 Bad Request] API key not valid. Please pass a valid API key. [{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"API_KEY_INVALID","domain":"googleapis.com","metadata":{"service":"generativelanguage.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"API key not valid. Please pass a valid API key."}]
    at handleResponseNotOk (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:432:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async makeRequest (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:401:9)
    at async generateContent (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:865:22)
    at async analyzeImageForParameters (file:///home/runner/workspace/server/services/geminiImage.js:189:20)
    at async Promise.all (index 1)
    at async processImagesWithGemini (file:///home/runner/workspace/server/controllers/uploadController.js:878:21) {
  status: 400,
  statusText: 'Bad Request',
  errorDetails: [
    {
      '@type': 'type.googleapis.com/google.rpc.ErrorInfo',
      reason: 'API_KEY_INVALID',
      domain: 'googleapis.com',
      metadata: [Object]
    },
    {
      '@type': 'type.googleapis.com/google.rpc.LocalizedMessage',
      locale: 'en-US',
      message: 'API key not valid. Please pass a valid API key.'
    }
  ]
}
Image analysis error: GoogleGenerativeAIFetchError: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent: [400 Bad Request] API key not valid. Please pass a valid API key. [{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"API_KEY_INVALID","domain":"googleapis.com","metadata":{"service":"generativelanguage.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"API key not valid. Please pass a valid API key."}]
    at handleResponseNotOk (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:432:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async makeRequest (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:401:9)
    at async generateContent (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:865:22)
    at async analyzeImageForParameters (file:///home/runner/workspace/server/services/geminiImage.js:189:20)
    at async Promise.all (index 4)
    at async processImagesWithGemini (file:///home/runner/workspace/server/controllers/uploadController.js:878:21) {
  status: 400,
  statusText: 'Bad Request',
  errorDetails: [
    {
      '@type': 'type.googleapis.com/google.rpc.ErrorInfo',
      reason: 'API_KEY_INVALID',
      domain: 'googleapis.com',
      metadata: [Object]
    },
    {
      '@type': 'type.googleapis.com/google.rpc.LocalizedMessage',
      locale: 'en-US',
      message: 'API key not valid. Please pass a valid API key.'
    }
  ]
}
Image analysis error: GoogleGenerativeAIFetchError: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent: [400 Bad Request] API key not valid. Please pass a valid API key. [{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"API_KEY_INVALID","domain":"googleapis.com","metadata":{"service":"generativelanguage.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"API key not valid. Please pass a valid API key."}]
    at handleResponseNotOk (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:432:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async makeRequest (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:401:9)
    at async generateContent (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:865:22)
    at async analyzeImageForParameters (file:///home/runner/workspace/server/services/geminiImage.js:189:20)
    at async Promise.all (index 0)
    at async processImagesWithGemini (file:///home/runner/workspace/server/controllers/uploadController.js:878:21) {
  status: 400,
  statusText: 'Bad Request',
  errorDetails: [
    {
      '@type': 'type.googleapis.com/google.rpc.ErrorInfo',
      reason: 'API_KEY_INVALID',
      domain: 'googleapis.com',
      metadata: [Object]
    },
    {
      '@type': 'type.googleapis.com/google.rpc.LocalizedMessage',
      locale: 'en-US',
      message: 'API key not valid. Please pass a valid API key.'
    }
  ]
}
Image analysis error: GoogleGenerativeAIFetchError: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent: [400 Bad Request] API key not valid. Please pass a valid API key. [{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"API_KEY_INVALID","domain":"googleapis.com","metadata":{"service":"generativelanguage.googleapis.com"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"API key not valid. Please pass a valid API key."}]
    at handleResponseNotOk (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:432:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async makeRequest (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:401:9)
    at async generateContent (file:///home/runner/workspace/server/node_modules/@google/generative-ai/dist/index.mjs:865:22)
    at async analyzeImageForParameters (file:///home/runner/workspace/server/services/geminiImage.js:189:20)
    at async Promise.all (index 2)
    at async processImagesWithGemini (file:///home/runner/workspace/server/controllers/uploadController.js:878:21) {
  status: 400,
  statusText: 'Bad Request',
  errorDetails: [
    {
      '@type': 'type.googleapis.com/google.rpc.ErrorInfo',
      reason: 'API_KEY_INVALID',
      domain: 'googleapis.com',
      metadata: [Object]
    },
    {
      '@type': 'type.googleapis.com/google.rpc.LocalizedMessage',
      locale: 'en-US',
      message: 'API key not valid. Please pass a valid API key.'
    }
  ]